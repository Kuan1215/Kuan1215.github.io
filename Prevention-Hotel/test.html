<!doctype html>
<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

    <title>Hello, world!</title>
</head>
<body>

    <div class="container">
    </div>
    <div class=" row p-0 m-0">
        <div class="crad-div p-0 m-0 d-flex flex-wrap justify-content-start">
            <template id="CradTemplate">
            <a class=" col-12 col-md-12 col-lg-3 col-xl-3 mx-0">
                <div class="card">
                    <img src="https://image.kkday.com/image/get/w_481%2Ch_280%2Cc_fill%2Cq_55%2Ct_webp/s1.kkday.com/product_116183/20210708055941_TCBYY/jpg"
                        class="card-img-top" alt="...">
                    <div class="card-body">
                        <h4 class="card-text">新北防疫旅館｜瓏山林台北中和飯店｜一泊三食｜8 晚居家檢疫專案</h4>
                        <span><i class="fa-solid fa-star"></i>
                            4.8 | (700) 300+ 個已訂購
                        </span>
                        <span class="map">
                            <i class="fa-solid fa-location-dot"></i>
                            台灣
                            新竹市
                        </span>
                        <p>
                            EUR <span class="money">762.64</span>
                        </p>
                    </div>
                </div>
            </a>
            </template>
        </div>
    </div>
    <template id="Template">
        <a href="#" id="Model" data-toggle="model"  data-target="">地區</a>
    </template>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <script>
        let container = document.querySelector(".container")
        let crad_div = document.querySelector(".crad-div")
        let url = "./Product.json"
        let xhr = new XMLHttpRequest();
        let ProductArray = [];
        xhr.onload = ()=>{
            let Prodeuctjson = JSON.parse(xhr.responseText)
            ProductArray = Object.values(Prodeuctjson)
            console.log(ProductArray)
            Addarea(ProductArray);
        };
        xhr.open("Get",url)
        xhr.send();
        function Addarea(ProductArray){
            let Template = document.querySelector("#Template")//clone地區
            ProductArray.forEach(area => {
                console.log(area);
                let clonearea  = Template.content.cloneNode(true);
                let a = clonearea.querySelector("a")
                a.innerText = Object.keys(area)
                btn()
                container.appendChild(clonearea)
                function btn(){
                    let CradTemplate = document.querySelector("#CradTemplate")//clone卡牌
                    a.addEventListener("click",()=>{
                        console.log(a.innerText)
                        crad_div.innerHTML = ""
                        let Product = Object.values(area)
                        Product.forEach(pr=>{
                            asd = Object.values(pr)
                            let cloneCrad =  CradTemplate.content.cloneNode(true)
                            let h4 = cloneCrad.querySelector("h4")
                            // consol.log()
                            console.log(pr)
                            asd.forEach(as=>{
                                // p.innerText = Object.values(pr)
                                h4.innerText = Object.keys(as)
                                crad_div.appendChild(cloneCrad)
                            })
                        })
                    })
                }
            });
        }
</script>
</body>
</html>